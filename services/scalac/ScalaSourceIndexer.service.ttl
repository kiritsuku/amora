@prefix service:                    <http://amora.center/kb/Schema/Service/0.1/> .
@prefix registry:                   <http://amora.center/kb/Service/0.1/> .
@prefix xsd:                        <http://www.w3.org/2001/XMLSchema#> .

@prefix Build:                      <http://amora.center/kb/amora/Schema/0.1/Build/0.1/> .
@prefix ScalaDependency:            <http://amora.center/kb/amora/Schema/0.1/ScalaDependency/0.1/> .
@prefix MavenDependency:            <http://amora.center/kb/amora/Schema/0.1/MavenDependency/0.1/> .
@prefix ServiceDependency:          <http://amora.center/kb/amora/Schema/0.1/ServiceDependency/0.1/> .
@prefix Artifact:                   <http://amora.center/kb/amora/Schema/0.1/Artifact/0.1/> .
@prefix Directory:                  <http://amora.center/kb/amora/Schema/0.1/Directory/0.1/> .
@prefix CompilationUnit:            <http://amora.center/kb/Schema/0.1/CompilationUnit/0.1/> .

registry:ScalaSourceIndexer
  service:name                      "amora.backend.services.ScalaSourceIndexer" ;
  service:method [
    service:name                    "run" ;
    service:param [
      service:name                  "origin" ;
      a                             xsd:string ;
    ] ;
    service:param [
      service:name                  "data" ;
      a [
        a                           xsd:list ;
        CompilationUnit:fileName    xsd:string ;
        CompilationUnit:source      xsd:string ;
      ] ;
    ] ;
    # The returned string contains linked data formatted in Turtle
    service:returnType              xsd:string
  ] ;
  service:build                     <#buildDef> ;
.
<#buildDef>
  Build:name                        "scalac-indexer" ;
  Build:version                     "0.1" ;
  Build:outputFolder                "bin" ;
  Build:dependency [
    a                               ServiceDependency: ;
    service:serviceId               registry:ScalaCompiler ;
  ] ;
  Build:dependency [
    a                               ServiceDependency: ;
    service:serviceId               registry:ScalacConverter ;
  ] ;
  Build:dependency [
    a                               MavenDependency: ;
    Artifact:organization           "org.scala-lang" ;
    Artifact:name                   "scala-library" ;
    Artifact:version                "2.11.8" ;
  ] ;
  Build:dependency [
    a                               MavenDependency: ;
    Artifact:organization           "org.scala-lang" ;
    Artifact:name                   "scala-reflect" ;
    Artifact:version                "2.11.8" ;
  ] ;
  Build:dependency [
    a                               MavenDependency: ;
    Artifact:organization           "org.scala-lang" ;
    Artifact:name                   "scala-compiler" ;
    Artifact:version                "2.11.8" ;
  ] ;
  Build:dependency [
    a                               ScalaDependency: ;
    Artifact:organization           "amora.center" ;
    Artifact:name                   "scalac-converter" ;
    Artifact:version                "0.1" ;
  ] ;
  Build:dependency [
    a                               ScalaDependency: ;
    Artifact:organization           "amora.center" ;
    Artifact:name                   "converter-protocol" ;
    Artifact:version                "0.1" ;
  ] ;
  Build:dependency [
    a                               ScalaDependency: ;
    Artifact:organization           "amora.center" ;
    Artifact:name                   "backend" ;
    Artifact:version                "0.1" ;
  ] ;
.

